{"version":3,"sources":["controllers/test.js"],"names":[],"mappings":";;;;;;;;;;+DAWO,iBAAqB,GAArB,EAA0B,IAA1B;AAAA,YAEK,GAFL,EAGK,MAHL,EASK,QATL;AAAA;AAAA;AAAA;AAAA;AAAA;AAEK,2BAFL,GAEW,iBAAO,MAAP,GAAgB,qCAF3B;AAGK,8BAHL,GAGc;AACT,qCAAS;AACL,8CAAc,iBAAO,SADhB;AAEL,0CAAU,iBAAO;AAFZ;AADA,yBAHd;AAAA;AAAA,+BASsB,eAAe,GAAf,EAAoB,MAApB,EAA4B,GAA5B,CATtB;;AAAA;AASK,gCATL;;AAUC,4BAAI,IAAJ,GAAW,SAAS,KAAK,IAAL,CAAU,SAAV,EAAqB,eAArB,CAAT,EAAgD,QAAhD,CAAX;AAVD,yDAWQ,MAXR;;AAAA;AAAA;AAAA;;AAaC,gCAAQ,GAAR;;AAbD;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;oBAAe,K;;;;;;+DAiBf,kBAAoB,GAApB,EAAyB,IAAzB;AAAA,YACC,GADD,EAEC,MAFD,EAQC,QARD;AAAA;AAAA;AAAA;AAAA;AACC,2BADD,GACO,iBAAO,MAAP,GAAgB,qCADvB;AAEC,8BAFD,GAEU;AACT,qCAAS;AACL,8CAAc,iBAAO,SADhB;AAEL,0CAAU,iBAAO;AAFZ;AADA,yBAFV;AAAA;AAAA,+BAQkB,eAAe,GAAf,EAAoB,MAApB,EAA4B,GAA5B,CARlB;;AAAA;AAQC,gCARD;;AASH,4BAAI,IAAJ,GAAW,QAAX;;AATG;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,K;oBAAe,I;;;;;AAnBtB;;;;;;;;;;AALA,IAAM,WAAW,QAAQ,cAAR,CAAjB;AACA,IAAM,OAAO,QAAQ,MAAR,CAAb;AACA,IAAM,UAAU,QAAQ,SAAR,CAAhB;AACA,IAAM,QAAQ,QAAQ,OAAR,EAAiB,sCAAjB,CAAd;;AAiCA,SAAS,cAAT,CAAwB,GAAxB,EAA6B,OAA7B,EAAsC;AAClC,QAAI,UAAU,IAAI,OAAJ,CAAY,UAAU,OAAV,EAAmB,MAAnB,EAA2B;AACjD,gBAAQ,GAAR,EAAa,OAAb,EAAsB,UAAU,KAAV,EAAiB,QAAjB,EAA2B,IAA3B,EAAiC;AACnD,gBAAI,CAAC,KAAD,IAAU,SAAS,UAAT,IAAuB,GAArC,EAA0C;AACtC,wBAAQ,IAAR;AACH,aAFD,MAEO;AACH,uBAAO,KAAP;AACH;AACJ,SAND;AAOH,KARa,CAAd;AASA,WAAO,OAAP;AACH","file":"controllers/test.js","sourcesContent":["/**\n * Created by Bell on 16/6/16.\n */\n\nconst template = require('art-template');\nconst path = require('path');\nconst request = require('request');\nconst debug = require('debug')('node-front-template:controllers:test');\n\nimport config from '../config/github';\n\nexport async function index(ctx, next) {\n    try {\n        let url = config.domain + '/repos/greedlab/node-front-template';\n        let option = {\n            headers: {\n                'User-Agent': config.useragent,\n                'Accept': config.accept\n            }\n        };\n        let response = await request_method(url, option, ctx);\n        ctx.body = template(path.join(__dirname, '../views/test'), response);\n        return next();\n    } catch (err) {\n        console.log(err);\n    }\n}\n\nexport async function test(ctx, next) {\n    let url = config.domain + '/repos/greedlab/node-front-template';\n    let option = {\n        headers: {\n            'User-Agent': config.useragent,\n            'Accept': config.accept\n        }\n    };\n    let response = await request_method(url, option, ctx);\n    ctx.body = response;\n}\n\nfunction request_method(uri, options) {\n    var promise = new Promise(function (resolve, reject) {\n        request(uri, options, function (error, response, body) {\n            if (!error && response.statusCode == 200) {\n                resolve(body);\n            } else {\n                reject(error);\n            }\n        });\n    });\n    return promise;\n}\n"],"sourceRoot":"/source/"}